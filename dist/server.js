!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=6)}([function(e,n){e.exports=require("path")},function(e,n,t){"use strict";(function(n,r){var o=t(11),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=t(12),u=t(0),i=t(15),c=u.basename(n),l=t(9).production,d={},f=void 0;f=l.use_env_variable?new i(process.env[l.use_env_variable]):new i(l.database,l.username,l.password,l),a.readdirSync(r).filter(function(e){return 0!==e.indexOf(".")&&e!==c&&".js"===e.slice(-3)}).forEach(function(e){var n=f.import(u.join(r,e));d[n.name]=n}),(0,s.default)(d).forEach(function(e){d[e].associate&&d[e].associate(d)}),d.sequelize=f,d.Sequelize=i,e.exports=d}).call(n,"/index.js","/")},function(e,n,t){"use strict";function r(e,n,t){return f.findOne({where:n}).then(function(n){n?(n.update(e),t(null,"Sucessfully registered")):t("Not an enrolled user")}).catch(function(e){t("Not an enrolled user")})}function o(e,n,t){return f.findOne({where:n}).then(function(r){if(!r)return f.create({email:n.email,password:e.password,username:e.username,batch:e.batch,phone:e.phone}).then(function(e){t(null,"Registered Sucessfully")}).catch(function(e){t("Not registered")});r.update(e),t(null,"Sucessfully registered")})}function s(e,n,t){return f.findOne({where:n}).then(function(n){n?((0,d.default)(n),console.log(n.password),n.password===e.password?t(null,n):t("Invalid Details")):t("Invalid Details")}).catch(function(e){t(e)})}function a(e,n){return f.findOne({where:n}).then(function(n){if(n)return n.update(e)}).catch(function(e){console.log(e)})}function u(e,n,t){var r={country:e.country,city:e.city,username:e.name,batch:e.batch,description:e.description,profile_photo:e.profile_photo,attend_event:e.attend_event,meal_preference:e.meal_preference,spouse:e.spouse,family_members:e.family_members,paid_via:e.paid_via,confirmation_code:e.confirmation_code,contribution_amount:e.contribution_amount,payment_date:e.payment_date,album_imgs:e.album_imgs};return f.findOne({where:n}).then(function(e){e&&(e.update(r),t(null,e))}).catch(function(e){t(error)})}function i(e,n,t,r){return e.batch&&n.username&&t?f.findAll({where:{batch:e.batch,username:n.username,attend_event:t}}).then(function(e){r(null,e)}).catch(function(e){r(e)}):e.batch&&n.username?f.findAll({where:{batch:e.batch,username:n.username}}).then(function(e){r(null,e)}).catch(function(e){r(e)}):e.batch&&t?f.findAll({where:{batch:e.batch,attend_event:t}}).then(function(e){r(null,e)}).catch(function(e){r(e)}):n.username&&t?f.findAll({where:{username:n.username,attend_event:t}}).then(function(e){r(null,e)}).catch(function(e){r(e)}):e.batch?f.findAll({where:{batch:e.batch}}).then(function(e){r(null,e)}).catch(function(e){r(e)}):n.username?f.findAll({where:{username:n.username}}).then(function(e){r(null,e)}).catch(function(e){r(e)}):void 0}function c(e){return f.findAll().then(function(n){e(null,n)}).catch(function(n){e(n)})}var l=t(10),d=function(e){return e&&e.__esModule?e:{default:e}}(l),f=(t(7).User,t(1).User),p=t(13),m=t(14);e.exports=function(e){e.get("/api",function(e,n){return n.status(200).send({message:"Welcome to the Todos API!"})});var n=m.createTransport({service:"gmail",auth:{user:"KvK.reu@gmail.com",pass:"kvkreu2018"},tls:{rejectUnauthorized:!1}}),t={from:"KvK.reu@gmail.com",to:"",subject:"Login Credentials for KVK",text:""};e.post("/register",function(e,o){var s=e.body.mail;t.to=s;var a=p.generate({length:10,numbers:!0});t.text="UserName:  "+s+"\npassword:  "+a,console.log(t),r({password:a},{email:s},function(e,r){e?o.send("Not a enrolled user"):(n.sendMail(t,function(e,n){e?console.log(e):console.log("Email sent: "+n.response)}),o.send("Registered Sucessfully"))})}),e.post("/newregister",function(e,r){var s=e.body.mail,a=e.body.batch,u=e.body.username,i=e.body.phone;t.to="kvk.reu@gmail.com";var c=p.generate({length:10,numbers:!0});t.text="UserName  :  "+u+"\n\nEmail : "+s+"\n\nBatch : "+a+"\n\nPhone : "+i+"\n\nPassword : "+c,n.sendMail(t,function(e,n){e?console.log(e):console.log("Email sent: "+n.response)}),o({password:c,batch:a,username:u,phone:i},{email:s},function(e,n){e?r.send("Not registered"):r.send("Registered Sucessfully")})}),e.get("/login",function(e,n){var t=e.query.mail;s({password:e.query.password},{email:t},function(e,t){e?n.send("Invalid Login Details"):n.send(t)})}),e.post("/changepassword",function(e,n){var t=e.body.mail;a({password:e.body.password},{email:t}),n.send("Password uploaded Successfully")}),e.post("/updatevalues",function(e,n){var t=e.body.data.email;u(e.body.data,{email:t},function(e,t){e?n.send("Values not updated"):n.send(t)})}),e.get("/getalbums",function(e,n){i({batch:e.query.batch},{username:e.query.username},e.query.attend_event,function(e,t){e?n.send(e):n.send(t)})}),e.get("/getalldetails",function(e,n){c(function(e,t){e?n.send(e):n.send(t)})})}},function(e,n){e.exports=require("body-parser")},function(e,n){e.exports=require("cors")},function(e,n){e.exports=require("express")},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=t(5),s=r(o),a=t(3),u=r(a),i=t(4),c=r(i),l=t(0),d=(r(l),(0,s.default)());d.use((0,c.default)()),d.use(u.default.urlencoded({extended:!1})),d.use(u.default.json()),t(2)(d),d.get("*",function(e,n){return n.status(200).send({message:"Welcome to the beginning of nothingness."})}),d.listen(process.env.PORT||8e3)},function(e,n,t){"use strict";var r=t(8);e.exports={User:r}},function(e,n,t){"use strict";var r=t(1).User;e.exports={create:function(e,n){return r.create({email:e.body.email,password:e.body.password,batch:e.body.batch,username:e.body.username,phone:e.body.phone}).then(function(e){return n.status(201).send(e)}).catch(function(e){return n.status(400).send(e)})}}},function(e,n){e.exports={development:{username:"postgres",password:"Prasad$hiv45",database:"KVK",host:"localhost",dialect:"postgres"},test:{username:"root",password:null,database:"database_test",host:"127.0.0.1",dialect:"postgres"},production:{username:"igbowcdjeurhgd",password:"e896caf072dfa8685ba083ac72e5352570368cd0bf2ee383eded31a05b47d931",database:"d2k6ajc030e3lm",host:"ec2-23-23-180-121.compute-1.amazonaws.com",dialect:"postgres",protocol:"postgres",port:"5432"}}},function(e,n){e.exports=require("babel-runtime/core-js/json/stringify")},function(e,n){e.exports=require("babel-runtime/core-js/object/keys")},function(e,n){e.exports=require("fs")},function(e,n){e.exports=require("generate-password")},function(e,n){e.exports=require("nodemailer")},function(e,n){e.exports=require("sequelize")}]);